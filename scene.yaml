sources:
    sat:
        type: Raster
        url: http://tile.sentinelmap.eu/16/8/{z}/{x}/{y}.jpg
        max_zoom: 14
        bounds: [0.0000, 40.9799, 16.87499, 52.48278] # [w, s, e, n]
    osm:
        type: TopoJSON
        url: http://tile.mapzen.com/mapzen/vector/v1/all/{z}/{x}/{y}.topojson?api_key=vector-tiles-Y3DcPK9
        max_zoom: 16

styles:
    satimg:
        base: raster
    label-lines:
        base: lines
        blend: overlay
        blend_order: 0 # under text
    label-text:
        base: text
        blend: overlay
        blend_order: 1 # top of text

layers:
    terrain:
        data: { source: sat }
        draw:
            satimg:
                order: 0
    water:
        data: { source: osm }
        waternames_0:
            filter:
                kind: [ocean, sea]
            draw:
                label-text:
                    buffer: 30px
                    font:
                        family: Arial
                        size: 12.5px
                        weight: bold
                        fill: [.65, 1, .95]
                        stroke: { color: [0, 0, 0], width: 2 }
                        transform: uppercase
        waternames_1:
            filter:
                all:
                    - kind: lake
                any:
                    - { $zoom: { min: 6 },  area: { min: 500000000 } }
                    - { $zoom: { min: 7 },  area: { min: 160000000 } }
                    - { $zoom: { min: 8 },  area: { min: 40000000 } }
                    - { $zoom: { min: 9 },  area: { min: 10000000 } }
                    - { $zoom: { min: 10 }, area: { min: 8000000 } }
                    - { $zoom: { min: 11 }, area: { min: 2000000 } }
                    - { $zoom: { min: 12 }, area: { min: 200000 } }
                    - { $zoom: { min: 13 }, area: { min: 100000 } }
                    - { $zoom: { min: 14 }, area: { min: 2000 } }
            draw:
                label-text:
                    buffer: 30px
                    font:
                        family: Arial
                        size: 10px
                        weight: bold
                        fill: [.65, 1, .95]
                        stroke: { color: [0, 0, 0], width: 2 }
                        transform: uppercase
        waternames_2:
            filter:
                kind: [river, canal]
            draw:
                label-text:
                    buffer: 30px
                    font:
                        family: Arial
                        size: 10px
                        fill: [0, .5, .6]
                        stroke: { color: [1, 1, 1], width: 3 }

        waterlines_0:
            filter:
                kind: ocean
                $zoom: { max: 9 }
            draw:
                label-lines:
                    order: 1
                    width: 2.0px
                    color: |
                        function() {
                            var a = 1 - ($zoom / 16)
                            return [0, .5, .6, a];
                        }
        waterlines_1:
            filter:
                not:
                    kind: ocean
            draw:
                label-lines:
                    order: 1
                    width: 1.0px
                    color: |
                        function() {
                            var a = 1 - ($zoom / 16)
                            return [0, .5, .6, a];
                        }
    boundaries:
        data: { source: osm }
        adminlines_0:
            filter:
                kind: country
            draw:
                label-lines:
                    order: 2
                    width: 2.5px
                    color: [.75, .75, .75, .375]
        adminlines_1:
            filter:
                kind: region
                $zoom: { min: 9 }
            draw:
                label-lines:
                    order: 2
                    width: 1.5px
                    color: [.75, .75, .75, .375]
    places:
        data: { source: osm }
        draw:
            label-text:
                font:
                    family: Arial
                    size: 10px
                    fill: [1, 1, 1]
